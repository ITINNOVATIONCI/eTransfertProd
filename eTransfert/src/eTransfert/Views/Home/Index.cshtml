@model Transactions
@{
    ViewBag.Title = "Bienvenue etransfert";
    //Layout = "_LayoutG";
}

@section Scripts {

    <!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
    <!-- BEGIN CORE JQUERY PLUGINS -->
    <!--[if lt IE 9]>
    <script src="/plugins/respond.min.js"></script>
    <script src="/plugins/excanvas.min.js"></script>
    <![endif]-->
    @*<script src="/plugins/jquery.min.js" type="text/javascript"></script>*@
    <script src="/plugins/jquery-migrate.min.js" type="text/javascript"></script>
    <script src="/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
    <script src="/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="/plugins/jquery.blockui.min.js" type="text/javascript"></script>
    
    <script src="/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
    <!-- END CORE JQUERY PLUGINS -->
    <!-- BEGIN APP LEVEL JQUERY SCRIPTS -->
    <script src="/scripts/metronic.js" type="text/javascript"></script>
    <script type="text/javascript" src="/plugins/select2/select2.min.js"></script>
    <script type="text/javascript" src="/plugins/datatables/media/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js"></script>
    <!-- END APP LEVEL JQUERY SCRIPTS -->
    <script src="/scripts/indexjs.js"></script>

    <script src="/js/toastr.js"></script>

    <script type="text/javascript">

        /* Init Metronic's core jquery plugins and layout scripts */
        $(document).ready(function () {
            Metronic.init(); // Run metronic theme
            Metronic.setAssetsPath('/'); // Set the assets folder path
            $('.k-update-button').prop("disabled", false);
        });
        

    </script>
    
    <!-- END JAVASCRIPTS -->



    <!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="/admin/layout3/scripts/layout.js" type="text/javascript"></script>









<script type="text/javascript">
     @ViewBag.messageVIP
    function foo() {
        var transaction={Id:1,Numero:"02734151"}
        var url = '@Url.Action("Paiement", "Home")';
        window.location.href = url;

        //var url = $("#RedirectTo").val();
        //location.href = url;




    }

    @*function submitdata() {

        var num = document.getElementById("phone_number");
        var mt = document.getElementById("montant");
        var tot = document.getElementById("total");
        var url = '@Url.Action("Paiement", "Home")';
        //alert("outside");
        $.ajax({
            type: 'post',
            url: url,
            data: {
                Numero: num,
                Montant: mt,
                Total:tot
                //user_course: course
            },
            success: function (response) {
                //alert("inside");
            }
        });

        return false;

    }*@



    function submitdata() {


        var num = document.getElementById("phone_number");
        var mt = document.getElementById("montant");
        var tot = document.getElementById("total");
        //var typ = document.getElementById("TypeTransfert");
        var typ = $("input[name='TypeTransfert']:checked").val();

        var url = '@Url.Action("Paiement", "Home")';

        //alert("numero : "+num.value+" montant : "+mt.value+" total : "+total.value+" total : "+tot.value+" type : "+typ)
        $.ajax({
            type: 'post',
            url: url,
            data: {
                Numero: num.value,
                Montant:mt.value,
                Total: tot.value,
                TypeTransfert: typ
            },
            success: function (response) {

                @*if (typ == "RAPIDE") {
                    //var urle = '@Url.Action("Index", "Home")';

                    // window.location.href = urle;
                }
                else {*@



                    window.setTimeout(function () {
                        Metronic.stopPageLoading();
                    }, 2000);
                    location.reload(true);
                    @*var urle = '@Url.Action("Index", "Home")';
               
                window.location.href = urle;*@
                    //alert("olivier");
                
            }
        });

        return false;

    }



    $('.k-update-button').on('submit', function (e) {

        $('#btn').prop("disabled", true);

        alert("olivier");
       
       
        //var bla = $('#phone_number').val();
        ////alert(bla);
        //if (bla == null  || bla == "" || bla == undefined) {


        //    $('.k-update-button').prop("disabled", false);
        //}
        //else {
        //    e.preventDefault();//arrete submit normal



        //    $('.k-update-button').prop("disabled", true);
        //    Metronic.startPageLoading({ animate: true });
        //    //foo();
        //    //alert("olivier before");
        //    submitdata();
        //    //alert("olivier after");

        //    //window.setTimeout(function () {
        //    //    Metronic.stopPageLoading();
        //    //}, 2000);
        //}


    });

     function ShowSuccessPopup() {
         // Display an info toast
         toastr.info('Transfert effectue avec succes', 'message');

     }

     function ShowErrorPopup() {
         // Display an info toast
         toastr.error('Echec du transfert.Veuillez reessayer svp!', 'message');

     }

     function ShowMaxSeuilPopup() {
         // Display an info toast
         toastr.error('Echec du transfert. Votre seuil est atteint', 'message');

     }

     function ShowMinSoldePopup() {
         // Display an info toast
         toastr.error('Echec du transfert. Votre solde est insuffisant', 'message');

     }

</script>


@*<script src="/plugins/pace/pace.min.js" type="text/javascript"></script>*@


}

@section scriptsh {

    <link rel="stylesheet" href="//kendo.cdn.telerik.com/2015.2.902/styles/kendo.common.min.css" />
    <link rel="stylesheet" href="//kendo.cdn.telerik.com/2015.2.902/styles/kendo.common-material.min.css" />
    <link rel="stylesheet" href="//kendo.cdn.telerik.com/2015.2.902/styles/kendo.material.min.css" />
@*<link href="~/plugins/pace/themes/pace-theme-bounce.css" rel="stylesheet" type="text/css" />*@

    <link href="~/css/toastr.css" rel="stylesheet" />

    <!-- AngularJS-->
    <script src="//kendo.cdn.telerik.com/2015.2.902/js/jquery.min.js"></script>
    @*<script src="//kendo.cdn.telerik.com/2015.2.902/js/angular.min.js"></script>*@
    @*<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>*@

    @*<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>*@
    @*<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-resource.js"></script>*@
    @*<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-route.js"></script>*@

    <script src="//kendo.cdn.telerik.com/2015.2.902/js/kendo.all.min.js"></script>
    <script src="//kendo.cdn.telerik.com/2015.2.902/js/kendo.aspnetmvc.min.js"></script>
    <script src="//kendo.cdn.telerik.com/2015.2.902/js/messages/kendo.messages.fr-FR.min.js"></script>






<link rel="stylesheet" href="http://jquery-ui.googlecode.com/svn/tags/1.8.18/themes/base/minified/jquery.ui.all.min.css">
  @*  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js"></script>*@

@*<script src="~/plugins/jquery.min.js"></script>
    <script src="~/plugins/jquery-ui/jquery-ui.min.js"></script>*@


<script src="~/plugins/jquery.cookie.js" type="text/javascript"></script>
<script src="~/plugins/jquery.ui.idle-logout.js" type="text/javascript"></script>
<!-- we want to force people to click a button, so hide the close link in the toolbar -->

@*<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">*@

@*<script>
		$(function () {
			$.idleLogout({
				logoutSeconds: 30,
				countdownSeconds: 25,
				logoutUrl: 'demo-logout.html'

			});
			$(document).
				bind('UserActivity.idleLogout UserIdle.idleLogout IdleLogout.idleLogout CancelLogut.idleLogout IdleDialogUpdate.idleLogout', function (e) {
						console.log(e.type, e.namespace, e);
						//alert("olivier");
					});
		});
</script>*@



@*<style type="text/css">
    a.ui-dialog-titlebar-close {
        display: none;
    }
</style>*@




}

<!-- BEGIN PAGE HEAD -->
<div class="page-head">
    <div class="container">
        <!-- BEGIN PAGE TITLE -->
        
        <div class="page-title">

            <h1>
                Accueil&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                

                @await Html.PartialAsync("~/Views/Home/_PromotionView.cshtml")
                


                



                @*<small class="animated infinite" style="animation-duration: 8s; animation-name: flipOutX;">


                   
                    <span class="badge badge-moov bold">spécial 200% Bonus Moov </span>Ajourd'hui 15 et demain 16 Mars  sur vos rechargements à partir de 500 fcfa   
                    * / *
                    
                </small>
                
                <small class="animated infinite" style="animation-duration: 8s; animation-name: flipOutX;">    
                           <span class="badge badge-mtn bold" style="font-size:large;">spécial 100% bonus</span> Ajourd'hui 15/02/2015  bonus MTN sur vos rechargements à partir de 500 fcfa
            </small>*@

            </h1>         
            
            @*@if (string.IsNullOrEmpty(ViewBag.messageVIP))
            {
                <script>
                    alert("valeur nulle");
                </script>

            }
            else
            {
                <script>
                    alert(@ViewBag.messageVIP);
                </script>

            }*@

        </div>
        <!-- END PAGE TITLE -->
    </div>
</div>
<!-- END PAGE HEAD -->
<!-- BEGIN PAGE CONTENT -->
<div class="page-content">

    <div class="container">
        <!-- BEGIN PAGE CONTENT INNER -->
        <div class="row margin-top-10">
            <div class="col-md-6 col-sm-12">
                <!-- BEGIN PORTLET-->
                <div class="portlet light " style="animation-duration: 1s; animation-name: slideInLeft;">
                    <div class="portlet-title">
                        <div class="caption caption-md">
                            <i class="icon-bar-chart theme-font hide"></i>
                            <span class="caption-subject theme-font bold uppercase animated slideInLeft">Transfert Rapide</span>
                        </div>
                    </div>
                    <div class="portlet-body k-content">
                        <form asp-action="Paiement" asp-controller="Home" method="post">
                            <label for="Title">Numero à recharger</label>
                            <input asp-for="Numero" id="phone_number"  required style="width: 100%;" />
                            @*<br /><br />*@
                            <label for="numeric">Montant</label>
                            <input id="montant" min="100" asp-for="Montant" value="100" required style="width: 100%;" />
                           
                            @*@Html.Hidden("RedirectTo", Url.Action("Paiement", "Home",Model));*@

                             <label asp-for="Pourcentage" value="7">Charge</label>
                            @*<input id="pourcentage" asp-for="Pourcentage" value="7" style="width: 100%;" />*@
                            <label id="lbl" for="numeric">Montant à Payer</label>
                            <label id="total" asp-for="Total" value="0" style="width: 100%;">0</label>
                            <br /><br />
                            <label for="paiement" style="width: 100%;">Mode de Paiement :</label>
                            <label for="paiement">Transfert Mobile Money</label>
                            <input id="paiement1" type="radio" asp-for="TypeTransfert" value="RAPIDE" checked />
                            @if (User.IsInRole("VIP") || User.IsInRole("ADMIN") || User.IsInRole("SUPERVIP"))
                            {
                                <label for="paiement">Transfert VIP</label>
                                <input id="paiement2" type="radio" asp-for="TypeTransfert" value="VIP" />
                            }
                            else
                            {

                                <label for="paiement">Transfert COMPTE</label>
                                <input id="paiement3" type="radio" asp-for="TypeTransfert" value="COMPTE" style="width: 100%;" />

                            }



                            <br /><br />


                            <button type="submit" class="k-update-button"><span class="k-icon k-update"></span></button>
                            @*<button type="submit" class="" name="btn" id="btn" value="valider">valider</button>*@
                        </form>

                    </div>
                    <style>
                        .k-content {
                            height: 330px;
                            color:#000000;
                        }
                    </style>
                </div>
                <!-- END PORTLET-->
            </div>
            <div class="col-md-6 col-sm-12">
                <!-- BEGIN PORTLET-->
                <div class="portlet light animated" style="animation-duration: 1s; animation-name: slideInRight;">
                    <div class="portlet-title">
                        <div class="caption caption-md">
                            <i class="icon-bar-chart theme-font hide"></i>
                            <span class="caption-subject theme-font bold uppercase animated slideInRight">Liste de mes Contacts favoris</span>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="contactGrid" style="color:#000000;">
                        </div>

                    </div>
                </div>
                <!-- END PORTLET-->
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 col-sm-12">
                <!-- BEGIN PORTLET-->
                <div class="portlet light tasks-widget animated swing">
                    <div class="portlet-title">
                        <div class="caption caption-md">
                            <i class="icon-bar-chart theme-font hide"></i>
                            <span class="caption-subject theme-font bold uppercase">Les 10 dernieres transactions</span>
                            <span class="caption-helper"></span>
                        </div>
                    </div>
                    <div class="portlet-body" style="color:#000000;">
                        <div class="task-content">
                            <div id="grid" style="color:#000000;"></div>

                        </div>
                        <div class="task-footer">
                        </div>
                    </div>
                </div>
                <!-- END PORTLET-->
            </div>
        </div>
        <!-- END PAGE CONTENT INNER -->
    </div>

</div>
<!-- END PAGE CONTENT -->

